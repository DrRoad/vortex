library("tools", lib.loc="C:/Program Files/R/R-3.2.1/library")
detach("package:tools", unload=TRUE)
master_county_data <- read.csv("~/vortex/output/master_county_data/master_county_data.csv")
View(master_county_data)
countydata<- countydata[1:3142,]
countydata<- master_county_data[,c("state_fips",
"county_fips",
"CensusRace...STNAME",
"CensusRace...CTYNAME",
"land_area",
"CensusRace...TOT_POP",
"CensusRace...H",
"poverty_pct_2014...PCTPOVALL_2014",
"hail...total_intensity",
"tornado...total_intensity",
"wind...total_intensity",
"natural_amenities...Scale"
)]
countydata$highfirerisk<- master_county_data$Fire_risk_2012...risk_4+master_county_data$Fire_risk_2012...risk_5
countydata$PercUnempl<- master_county_data$unemployed_2014...Unemployed_2014/master_county_data$CensusRace...TOT_POP
countydata$PercMino<- (master_county_data$CensusRace...TOT_POP - master_county_data$CensusRace...WA)/master_county_data$CensusRace...TOT_POP
## temporary fix of NAs##
countydata<- countydata[1:3142,]
countydata$PercUnempl<- as.numeric(master_county_data$unemployed_2014...Unemployed_2014)/master_county_data$CensusRace...TOT_POP
countydata<- master_county_data[,c("state_fips",
"county_fips",
"CensusRace...STNAME",
"CensusRace...CTYNAME",
"land_area",
"CensusRace...TOT_POP",
"CensusRace...H",
"poverty_pct_2014...PCTPOVALL_2014",
"hail...total_intensity",
"tornado...total_intensity",
"wind...total_intensity",
"natural_amenities...Scale"
)]
countydata$highfirerisk<- master_county_data$Fire_risk_2012...risk_4+master_county_data$Fire_risk_2012...risk_5
countydata$PercUnempl<- as.numeric(master_county_data$unemployed_2014...Unemployed_2014)/master_county_data$CensusRace...TOT_POP
countydata$PercMino<- (master_county_data$CensusRace...TOT_POP - master_county_data$CensusRace...WA)/master_county_data$CensusRace...TOT_POP
## temporary fix of NAs##
countydata<- countydata[1:3142,]
write.csv("~/vortex/output/master_county_data/cleanedcounty.csv")
write.csv(countydata, "~/vortex/output/master_county_data/cleanedcounty.csv")
getwd()
source('~/poverty_clean.R')
setwd(vortex)
setwd("vortex")
getwd()
install.packages("rio")
library(rio)
pov <- import("file:///C:/Users/Laura A/Downloads/PovertyEstimates.xls")
pov <- import("C:/Users/Laura A/Downloads/PovertyEstimates.xls")
view(pov)
View(pov)
write.csv("C:/Users/Laura A/Downloads/pov_attempt.csv")
write.csv(pov,"C:/Users/Laura A/Downloads/pov_attempt.csv")
write.csv(pov,"C:/Users/Laura A/Downloads/pov_attempt.csv",row.names=F)
#data obtained from http://www.ers.usda.gov/data-products/county-level-data-sets/download-data.aspx
setwd("vortex")
library(rio)
pov <- import("C:/Users/Laura A/Downloads/Unemployment.csv")
write.csv(pov,"C:/Users/Laura A/Downloads/un_attempt.csv",row.names=F)
pov <- import("C:/Users/Laura A/Downloads/Unemployment.xls")
write.csv(pov,"C:/Users/Laura A/Downloads/un_attempt.csv",row.names=F)
pov[0:10,1]
which(pov[,1]=="FIPS_Code")
pov <- pov.raw[,1:(which(pov[,1]=="FIPS_Code")-1)]
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls")
pov <- pov.raw[,1:(which(pov[,1]=="FIPS_Code")-1)]
head(pov)
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls")
pov <- pov.raw[,-1:(which(pov[,1]=="FIPS_Code")-1)]
head(pov)
pov <- pov.raw[,-1:5]
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls")
pov <- pov.raw[-1:(which(pov[,1]=="FIPS_Code")-1),]
pov <- pov.raw[-1:c(which(pov[,1]=="FIPS_Code")-1),]
(which(pov[,1]=="FIPS_Code")-1)
pov <- pov.raw[-(1:(which(pov[,1]=="FIPS_Code")-1)),]
head(pov)
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls",row.names=F)
names(pov)
class(pov)
colnames(pov) <- [which(pov[,1]=="FIPS_Code",]
pov[which(pov[,1]=="FIPS_Code",]
pov[which(pov[,1]=="FIPS_Code"),]
pov$FIPS_Code
head(FIPS_Code)
head(pov)
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls",rownames=F)
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls",row.names=F)
pov.raw[1,]
head(pov.raw)
tail(pov.raw)
head(pov.raw)
pov.raw[,1]
pov.raw[-(1:(which(pov[,1]=="FIPS_Code")-1)),]
pov <- pov.raw[-(1:(which(pov.raw[,1]=="FIPS_Code")-1)),] #remove the rows above the column names, held comments from original excel file
colnames(pov) <- pov[which(pov[,1]=="FIPS_Code"),];
head(pov)
pov$FIPS_Code
which(pov.raw$FIPS_Code=="FIPS_Code")
which(pov.raw$FIPS_Code=="FIPS_Code")
names(pov.raw)
which(pov$FIPS_Code=="FIPS_Code")
pov <- pov[-which(pov$FIPS_Code=="FIPS_Code"),]
head(pov)
pov <- pov[-which(pov$FIPS_Code=="FIPS_Code"),]
head(pov)
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls",rownames=F)
pov <- pov.raw[-(1:(which(pov.raw[,1]=="FIPS_Code")-1)),] #remove the rows above the column names, held comments from original excel file
pov.raw <- import("C:/Users/Laura A/Downloads/Unemployment.xls")
pov <- pov.raw[-(1:(which(pov.raw[,1]=="FIPS_Code")-1)),] #remove the rows above the column names, held comments from original excel file
colnames(pov) <- pov[which(pov[,1]=="FIPS_Code"),] #adds rownames
head(pov)
pov <- pov[-which(pov$FIPS_Code=="FIPS_Code"),]
head(pov)
ptry <- pov[-which(pov$FIPS_Code=="FIPS_Code"),]
-which(pov$FIPS_Code=="FIPS_Code")
if(pov[-which(pov$FIPS_Code=="FIPS_Code"),]!=0)
)
if(which(pov$FIPS_Code=="FIPS_Code")!=0,ptry <- pov[-which(pov$FIPS_Code=="FIPS_Code"),])
which(pov$FIPS_Code=="FIPS_Code")!=0
which(pov$FIPS_Code=="FIPS_Code")
head(pov)
pov <- pov.raw[-(1:(which(pov.raw[,1]=="FIPS_Code")-1)),] #remove the rows above the column names, held comments from original excel file
colnames(pov) <- pov[which(pov[,1]=="FIPS_Code"),] #adds rownames
which(pov$FIPS_Code=="FIPS_Code")
which(pov$FIPS_Code=="FIPS_Code")=!0
which(pov$FIPS_Code=="FIPS_Code")!=0
if (which(pov$FIPS_Code=="FIPS_Code")!=0,p.try <- pov[-which(pov$FIPS_Code=="FIPS_Code"),])
if (which(pov$FIPS_Code=="FIPS_Code")!=0){p.try <- pov[-which(pov$FIPS_Code=="FIPS_Code"),]}
head(pov)
