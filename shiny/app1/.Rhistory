source('~/Documents/vortex/code/tornado_wind_hail.R', echo=TRUE)
setwd("~/documents/vortex")
source('~/Documents/vortex/code/tornado_wind_hail.R', echo=TRUE)
lapply(d, head)
d <- lapply(d, countify)
d <- lapply(d[1], countify)
d <- lapply(files, load_data)
lapply(d[1], countify)
lapply(d[2], countify)
lapply(d[3], countify)
head(d[3])
head(d[[3]])
names(d)
data <- d[[3]]
data <- data %>%
mutate(state_fips = str_pad(state_fips, 2, "left", "0"),
county_fips = str_pad(county_fips_1, 3, "left", "0")) %>%
group_by(state_fips, county_fips) %>%
dplyr::summarize(n_storms=n(),
total_intensity=sum(intensity))
names(data)
names(data)[is.na(names(data))] <- "a"
data <- data %>%
mutate(state_fips = str_pad(state_fips, 2, "left", "0"),
county_fips = str_pad(county_fips_1, 3, "left", "0")) %>%
group_by(state_fips, county_fips) %>%
dplyr::summarize(n_storms=n(),
total_intensity=sum(intensity))
data<- filter(data, county_fips != "000")  #removing aggregate state and country rows
d <- lapply(d, countify)
countify <- function(data){
require(stringr)
names(data)[is.na(names(data))] <- "a"
data <- data %>%
mutate(state_fips = str_pad(state_fips, 2, "left", "0"),
county_fips = str_pad(county_fips_1, 3, "left", "0")) %>%
group_by(state_fips, county_fips) %>%
dplyr::summarize(n_storms=n(),
total_intensity=sum(intensity))
data<- filter(data, county_fips != "000")  #removing aggregate state and country rows
return(data)
}
d <- lapply(d, countify)
d <- lapply(d, na2min)
for(w in names(d)) write.csv(d[[w]], paste0("output/tidy_county_data/", w, ".csv"), row.names=F)
source('~/Documents/vortex/code/tornado_wind_hail.R', echo=TRUE)
shiny::runApp('shiny/app1')
runApp('shiny/app1')
?tags
?lapply
?downloadButton
?downloadHandler
source('~/Documents/vortex/code/join_tidy_county_data.R', echo=TRUE)
runApp('shiny/app1')
runApp('shiny/app1')
runApp('shiny/app1')
runApp('shiny/app1')
runApp('shiny/app1')
runApp('shiny/app1')
runApp('shiny/app1')
ds <- read.csv("data/cleanedsocial.csv", stringsAsFactors=F) %>%
mutate(fips = as.integer(paste0(state_fips, str_pad(county_fips, 3, "left", 0)))) %>%
select(-STNAME, -CTYNAME, -state_fips, -county_fips, -land_area)
setwd("~/documents/vortex/shiny/app1")
ds <- read.csv("data/cleanedsocial.csv", stringsAsFactors=F) %>%
mutate(fips = as.integer(paste0(state_fips, str_pad(county_fips, 3, "left", 0)))) %>%
select(-STNAME, -CTYNAME, -state_fips, -county_fips, -land_area)
head(ds)
runApp()
ds <- read.csv("data/cleanedsocial.csv", stringsAsFactors=F) %>%
mutate(fips = as.integer(paste0(state_fips, str_pad(county_fips, 3, "left", 0)))) %>%
select(-STNAME, -CTYNAME, -state_fips, -county_fips, -land_area, -Income_Dollars)
runApp()
runApp()
runApp()
runApp()
